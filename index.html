<!DOCTYPE html>

<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Buscador de Licitaciones Inteligente</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700;800;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="tailwind.config.js"></script>
    <style>
        /* Agregando estilos para scroll que venían del de detalles */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display antialiased min-h-screen flex flex-col md:flex-row overflow-hidden">
    <!-- Sidebar -->
    <aside
        class="w-full md:w-64 bg-white dark:bg-[#1a2234] border-r border-slate-200 dark:border-slate-800 flex-shrink-0 flex flex-col h-screen sticky top-0">
        <!-- Brand -->
        <div class="h-16 flex items-center px-6 border-b border-slate-100 dark:border-slate-800">
            <div class="flex items-center gap-2 text-primary">
                <span class="material-symbols-outlined text-3xl">gavel</span>
                <span class="text-lg font-bold tracking-tight text-slate-900 dark:text-white">LICITADOR <span
                        class="text-primary">PE</span></span>
            </div>
        </div>
        <!-- User Profile (Simplified) -->
        <div class="p-4 border-b border-slate-100 dark:border-slate-800">
            <div class="flex items-center gap-3">
                <div class="bg-slate-200 dark:bg-slate-700 h-10 w-10 rounded-full bg-cover bg-center"
                    data-alt="User profile picture of a professional man in a suit"
                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBqGnUZw6TGxeEjeZ22zJNf-Q4AIf3dxxLXK03Y2dlLa9Se8gjG0M-yujkuXVNdtzLD5-Rt4TTI3XJlneiHZYJZAHkRN8gl-XeKiTaEb4Sm2WimT0RPdh48y-Uz5WVX-Dvvvx2rjpqpKPVvNR4CDDFl9kLY1HrRDStCfIRE72p7YnjZRhYfs-yEXXehHWVGHkX5IqhZtvrpNZJ4g6yT4AonT4X15jXTiNJlYkPfJ1HZSITiA9ZJxpCoqH72dPCQ3oExUayd4eTcuuI');">
                </div>
                <div class="flex flex-col">
                    <h3 class="text-sm font-semibold text-slate-900 dark:text-white">INPROMETAL SAC</h3>
                    <p class="text-xs text-slate-500 dark:text-slate-400">Plan Corporativo</p>
                </div>
            </div>
        </div>
        <!-- Navigation -->
        <nav class="flex-1 overflow-y-auto py-4 px-3 space-y-1">
            <a id="navDashboard"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary transition-colors group cursor-pointer"
                onclick="switchView('dashboard')">
                <span class="material-symbols-outlined group-hover:text-primary">dashboard</span>
                <span class="text-sm font-medium">Dashboard</span>
            </a>
            <a id="navSearch"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary font-medium transition-colors cursor-pointer"
                onclick="switchView('search')">
                <span class="material-symbols-outlined fill-1">search</span>
                <span class="text-sm">Buscador</span>
            </a>
            <a id="navAnalytics"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary transition-colors group cursor-pointer"
                onclick="switchView('analytics')">
                <span class="material-symbols-outlined group-hover:text-primary">analytics</span>
                <span class="text-sm font-medium">Analíticas</span>
            </a>
            <!-- Smart Alerts Section -->
            <div class="pt-6 pb-2 px-3">
                <p class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Alertas Inteligentes</p>
            </div>
            <a class="flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 group transition-colors"
                href="#">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-orange-500">notifications_active</span>
                    <span class="text-sm font-medium">Nuevas Oportunidades</span>
                </div>
                <span class="bg-orange-100 text-orange-600 text-xs font-bold px-2 py-0.5 rounded-full">3</span>
            </a>
            <a class="flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 group transition-colors"
                href="#">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-red-500">warning</span>
                    <span class="text-sm font-medium">Cierre Próximo</span>
                </div>
                <span class="bg-red-100 text-red-600 text-xs font-bold px-2 py-0.5 rounded-full">1</span>
            </a>
            <!-- Saved Searches Section -->
            <div class="pt-6 pb-2 px-3">
                <p class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Búsquedas Guardadas</p>
            </div>
            <span class="text-sm font-medium">Puentes Metálicos</span>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors"
                href="#">
                <span class="material-symbols-outlined text-slate-400 text-[20px]">bookmark</span>
                <span class="text-sm">Estructuras Lima</span>
            </a>
        </nav>
        <div class="p-4 border-t border-slate-100 dark:border-slate-800">
            <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
                href="#">
                <span class="material-symbols-outlined">settings</span>
                <span class="text-sm font-medium">Configuración</span>
            </a>
            <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors mt-1"
                href="#">
                <span class="material-symbols-outlined">logout</span>
                <span class="text-sm font-medium">Cerrar Sesión</span>
            </a>
        </div>
    </aside>
    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden bg-background-light dark:bg-background-dark relative">
        <!-- Gradient Background Decor -->
        <div
            class="absolute top-0 left-0 right-0 h-64 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none">
        </div>
        <!-- Header Area -->
        <header class="flex-shrink-0 px-8 py-6 z-10">
            <!-- Secciones de Navegación -->
            <div id="searchView" class="view-section">
                <div class="flex justify-between items-end mb-6">
                    <div>
                        <h1 class="text-3xl font-black text-slate-900 dark:text-white tracking-tight mb-2">Buscador de
                            Licitaciones</h1>
                        <p class="text-slate-500 dark:text-slate-400">Encuentra oportunidades de gobierno
                            relevantes para INPROMETAL.</p>
                    </div>
                </div>
                <!-- Search Bar Container -->
                <div
                    class="bg-white dark:bg-[#1e293b] p-2 rounded-xl shadow-lg shadow-slate-200/50 dark:shadow-black/20 border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-2">
                    <div class="flex-1 relative flex items-center">
                        <span class="material-symbols-outlined absolute left-4 text-slate-400">search</span>
                        <input id="searchInput"
                            class="w-full pl-12 pr-4 py-3 bg-transparent border-none focus:ring-0 text-slate-900 dark:text-white placeholder-slate-400 text-base"
                            placeholder="Ej: Estructuras metálicas, fierro negro, mantenimiento..." type="text"
                            value="" />
                    </div>
                    <div class="h-px md:h-auto md:w-px bg-slate-200 dark:bg-slate-700 my-2 md:my-0"></div>
                    <!-- Quick Filters Row inside Search Bar -->
                    <div class="flex items-center gap-2 px-2 overflow-x-auto no-scrollbar">
                        <div class="relative group">
                            <select id="regionSelect"
                                class="form-select bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium rounded-lg border-none focus:ring-0 py-2 pl-3 pr-8 cursor-pointer appearance-none">
                                <option value="">Región: Todas</option>
                                <option value="Lima">Lima</option>
                                <option value="Callao">Callao</option>
                                <option value="Nacional">Nacional</option>
                            </select>
                        </div>
                        <div class="relative group">
                            <select id="cubsoSelect"
                                class="form-select bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium rounded-lg border-none focus:ring-0 py-2 pl-3 pr-8 cursor-pointer appearance-none">
                                <option value="">CUBSO: Todos</option>
                                <option value="7215">Estructuras Metálicas (7215)</option>
                                <option value="7212">Obras y Edificaciones (7212)</option>
                                <option value="9514">Fabricación de Metal (9514)</option>
                                <option value="OTROS">Otros Sectores</option>
                            </select>
                        </div>
                        <div class="relative group">
                            <select id="budgetSelect"
                                class="form-select bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium rounded-lg border-none focus:ring-0 py-2 pl-3 pr-8 cursor-pointer appearance-none">
                                <option value="">Presupuesto: Todos</option>
                                <option value="viable">S/ 50k - S/ 1M (Viable)</option>
                                <option value="high">S/ 1M+ (Grandes Proyc.)</option>
                                <option value="low">Menor a S/ 50k</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2 px-3 border-l border-slate-200 dark:border-slate-700 ml-2">
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input id="activeOnlyToggle" type="checkbox" value="" class="sr-only peer">
                                <div
                                    class="w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-primary">
                                </div>
                                <span
                                    class="ml-2 text-xs font-semibold text-slate-500 dark:text-slate-400 whitespace-nowrap">Solo
                                    Activas</span>
                            </label>
                        </div>
                    </div>
                    <button id="searchBtn"
                        class="bg-primary hover:bg-blue-700 text-white px-8 py-2.5 rounded-lg font-medium shadow-md shadow-blue-500/20 transition-all flex items-center justify-center gap-2">
                        Buscar
                    </button>
                </div>
                <!-- Active Filters Chips -->
                <div id="activeFilters" class="mt-4 flex flex-wrap gap-2">
                    <!-- Las etiquetas de filtros activos se inyectarán por JS -->
                </div>
        </header>
        <!-- Results Table Section -->
        <section class="flex-1 overflow-hidden px-8 pb-8 flex flex-col">
            <div
                class="bg-white dark:bg-[#1e293b] rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col h-full overflow-hidden">
                <!-- Table Toolbar -->
                <div
                    class="px-6 py-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-white dark:bg-[#1e293b]">
                    <h2 class="text-base font-semibold text-slate-800 dark:text-slate-200">
                        Resultados <span id="resultsCount" class="text-slate-400 font-normal text-sm ml-1">(0
                            encontrados)</span>
                    </h2>
                    <div class="flex items-center gap-3">
                        <span class="text-sm text-slate-500">Ordenar por:</span>
                        <select id="sortSelect"
                            class="form-select text-sm border-none bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg py-1.5 pl-3 pr-8 focus:ring-0 cursor-pointer font-medium">
                            <option>Relevancia (Match)</option>
                            <option>Fecha de Publicación</option>
                            <option>Presupuesto (Mayor a Menor)</option>
                            <option>Cierre Próximo</option>
                        </select>
                        <div class="w-px h-4 bg-slate-200 dark:bg-slate-700 mx-1"></div>
                        <button class="text-slate-400 hover:text-primary transition-colors"><span
                                class="material-symbols-outlined">grid_view</span></button>
                        <button class="text-primary"><span class="material-symbols-outlined">list</span></button>
                    </div>
                </div>
                <!-- Scrollable Table Area -->
                <div class="flex-1 overflow-auto w-full custom-scrollbar">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-slate-50 dark:bg-slate-800/50 sticky top-0 z-10 shadow-sm">
                            <tr>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[30%]">
                                    Título de la Licitación</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[15%]">
                                    Organismo / Estado</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[15%]">
                                    Presupuesto (S/)</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[15%]">
                                    Fecha Límite</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[10%] text-center">
                                    Match</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[10%] text-center">
                                    Estatus</th>
                                <th
                                    class="py-3 px-6 text-xs font-semibold text-slate-500 uppercase tracking-wider w-[5%]">
                                </th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody" class="divide-y divide-slate-100 dark:divide-slate-700">
                            <!-- Los resultados dinámicos irán aquí -->
                        </tbody>
                    </table>

                    <!-- ESTADO VACÍO (Nuevo) -->
                    <div id="emptyState" class="hidden py-20 text-center">
                        <span class="material-symbols-outlined text-6xl text-slate-200 mb-4">search_off</span>
                        <h3 class="text-lg font-bold text-slate-800 dark:text-slate-200">No hay licitaciones con estos
                            filtros</h3>
                        <p class="text-slate-500 text-sm">Intenta ajustando las palabras clave o el rango de
                            presupuesto.</p>
                    </div>
                </div>

                <!-- Pagination Footer (Se ocultará si hay 0 resultados) -->
                <div id="paginationFooter"
                    class="px-6 py-4 border-t border-slate-100 dark:border-slate-700 flex items-center justify-between bg-white dark:bg-[#1e293b]">
                    <div class="text-sm text-slate-500 dark:text-slate-400">
                        Mostrando <span id="currentRange" class="font-medium text-slate-900 dark:text-white">...</span>
                        de <span id="totalResultsText" class="font-medium text-slate-900 dark:text-white">...</span>
                        resultados
                    </div>
                    <div class="flex gap-2">
                        <button
                            class="px-3 py-1 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50"
                            disabled="">Anterior</button>
                        <button class="px-3 py-1 rounded bg-primary text-white text-sm hover:bg-blue-600">1</button>
                        <button
                            class="px-3 py-1 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm hover:bg-slate-50 dark:hover:bg-slate-800">2</button>
                        <button
                            class="px-3 py-1 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm hover:bg-slate-50 dark:hover:bg-slate-800">3</button>
                        <span class="px-2 text-slate-400">...</span>
                        <button
                            class="px-3 py-1 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm hover:bg-slate-50 dark:hover:bg-slate-800">Siguiente</button>
                    </div>
                </div>
            </div>
        </section>
        </div> <!-- Cierre de searchView -->

        <!-- Dashboard View -->
        <div id="dashboardView"
            class="view-section hidden flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-8">
            <h1 class="text-3xl font-black text-slate-900 dark:text-white tracking-tight mb-8">Panel de Control</h1>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div
                    class="bg-white dark:bg-surface-dark p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm">
                    <p class="text-xs font-bold text-slate-400 uppercase mb-2">Oportunidades Totales</p>
                    <p id="statTotal" class="text-4xl font-black text-primary">0</p>
                </div>
                <div
                    class="bg-white dark:bg-surface-dark p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm">
                    <p class="text-xs font-bold text-slate-400 uppercase mb-2">Presupuesto en Obras</p>
                    <p id="statBudget" class="text-4xl font-black text-green-500">S/ 0</p>
                </div>
                <div
                    class="bg-white dark:bg-surface-dark p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm">
                    <p class="text-xs font-bold text-slate-400 uppercase mb-2">Match Promedio</p>
                    <p id="statMatch" class="text-4xl font-black text-orange-500">0%</p>
                </div>
            </div>
            <div class="bg-primary/5 border border-primary/20 p-8 rounded-2xl">
                <h2 class="font-bold text-primary mb-4 flex items-center gap-2">
                    <span class="material-symbols-outlined">analytics</span> Inteligencia de Mercado
                </h2>
                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                    Este mes se han detectado procesos que requieren estructuras metálicas en varias regiones del Perú.
                    Le recomendamos enfocar su búsqueda en <strong>Junín</strong> y <strong>Lima</strong>, donde se
                    concentran los mayores presupuestos.
                </p>
            </div>
        </div>

        <!-- Analíticas View -->
        <div id="analyticsView"
            class="view-section hidden flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-8 text-center">
            <h1 class="text-3xl font-black text-slate-900 dark:text-white tracking-tight mb-8">Analíticas</h1>
            <div
                class="bg-white dark:bg-surface-dark p-12 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700">
                <span class="material-symbols-outlined text-6xl text-slate-300 mb-4 font-light">insights</span>
                <p class="text-slate-500">Módulo de IA analizando tendencias del SEACE...</p>
            </div>
        </div>
    </main>
    <script src="app.js"></script>
</body>

</html>