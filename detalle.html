<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Detalle de Licitación | LICITADOR PE</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700" rel="stylesheet" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: { DEFAULT: '#135bec', 50: '#eff4ff', 100: '#dbeafe', 600: '#2563eb' } },
                    fontFamily: { sans: ['Public Sans', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: "Public Sans", sans-serif;
        }

        .tab-active {
            color: #135bec;
            border-color: #135bec;
            font-weight: 700;
        }

        .tab-inactive {
            color: #94a3b8;
            border-color: transparent;
        }

        .tab-inactive:hover {
            color: #475569;
        }

        .timeline-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 3px solid;
            flex-shrink: 0;
        }

        .timeline-line {
            width: 2px;
            flex-shrink: 0;
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col md:flex-row">

    <!-- Sidebar -->
    <aside class="w-full md:w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col h-screen sticky top-0">
        <div class="h-16 flex items-center px-6 border-b border-slate-100">
            <a href="index.html" class="flex items-center gap-2">
                <span class="material-symbols-outlined text-3xl text-primary">gavel</span>
                <span class="text-lg font-black tracking-tight text-slate-800">LICITADOR <span
                        class="text-primary">PE</span></span>
            </a>
        </div>
        <div class="p-5 border-b border-slate-100">
            <div class="flex items-center gap-3">
                <div class="bg-primary/10 h-10 w-10 rounded-full flex items-center justify-center">
                    <span class="material-symbols-outlined text-primary text-xl">domain</span>
                </div>
                <div>
                    <h3 class="text-sm font-black text-slate-800 leading-tight">INPROMETAL SAC</h3>
                    <p class="text-[10px] text-primary font-bold uppercase tracking-widest">Plan Corporativo</p>
                </div>
            </div>
        </div>
        <nav class="flex-1 p-3 space-y-1">
            <a href="index.html"
                class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-50 hover:text-primary transition-all font-semibold text-sm">
                <span class="material-symbols-outlined text-xl">arrow_back</span>
                Volver al Buscador
            </a>
        </nav>

        <!-- Entity Profile (Nuevo: Historial de la Entidad) -->
        <div class="p-4 border-t border-slate-100">
            <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3">Perfil del Comprador</h4>
            <div id="entityProfile" class="space-y-2">
                <div class="flex justify-between text-xs">
                    <span class="text-slate-500">Frecuencia:</span>
                    <span id="entityFreq" class="font-bold text-slate-700">--</span>
                </div>
                <div class="flex justify-between text-xs">
                    <span class="text-slate-500">Historial (12m):</span>
                    <span id="entityHistory" class="font-bold text-slate-700">--</span>
                </div>
                <div class="flex justify-between text-xs">
                    <span class="text-slate-500">Sector:</span>
                    <span id="entitySector" class="font-bold text-primary">Infraestructura</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto h-screen">

        <!-- Top Bar con Acciones -->
        <div
            class="sticky top-0 z-20 bg-white/80 backdrop-blur-xl border-b border-slate-200 px-8 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <span id="statusBadge"
                    class="px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700">Abierta</span>
                <span id="topTenderId" class="text-xs font-mono text-slate-400">---</span>
            </div>
            <div class="flex items-center gap-3">
                <button id="followBtn" onclick="toggleFollow()"
                    class="flex items-center gap-2 px-4 py-2 rounded-xl border-2 border-slate-200 text-slate-500 hover:border-primary hover:text-primary transition-all text-sm font-bold">
                    <span class="material-symbols-outlined text-lg">bookmark</span>
                    Seguir Proceso
                </button>
                <button
                    class="flex items-center gap-2 px-4 py-2 rounded-xl bg-primary text-white text-sm font-bold hover:bg-primary-600 transition-all shadow-lg shadow-primary/20">
                    <span class="material-symbols-outlined text-lg">send</span>
                    Postular
                </button>
            </div>
        </div>

        <div class="max-w-5xl mx-auto px-8 py-8">
            <!-- Header -->
            <div class="mb-8">
                <h1 id="tenderTitle" class="text-3xl font-black text-slate-900 leading-tight mb-3">Cargando...</h1>
                <div class="flex flex-wrap items-center gap-4 text-sm text-slate-500">
                    <div class="flex items-center gap-1.5">
                        <span class="material-symbols-outlined text-base">account_balance</span>
                        <span id="tenderAgency" class="font-bold text-slate-700">---</span>
                    </div>
                    <span class="text-slate-300">|</span>
                    <div class="flex items-center gap-1.5">
                        <span class="material-symbols-outlined text-base">location_on</span>
                        <span id="tenderLocation" class="font-medium">---</span>
                    </div>
                    <span class="text-slate-300">|</span>
                    <div class="flex items-center gap-1.5">
                        <span class="material-symbols-outlined text-base">calendar_today</span>
                        <span>Publicado: <span id="tenderPubDate" class="font-medium">---</span></span>
                    </div>
                </div>
            </div>

            <!-- Tabs de Navegación -->
            <div class="border-b border-slate-200 mb-8">
                <nav class="flex gap-8" id="tabNav">
                    <button onclick="switchTab('resumen')" class="tab-active pb-4 border-b-2 text-sm transition-all"
                        id="tabResumen">Resumen</button>
                    <button onclick="switchTab('cronograma')"
                        class="tab-inactive pb-4 border-b-2 text-sm transition-all"
                        id="tabCronograma">Cronograma</button>
                    <button onclick="switchTab('documentos')"
                        class="tab-inactive pb-4 border-b-2 text-sm transition-all"
                        id="tabDocumentos">Documentos</button>
                    <button onclick="switchTab('similares')" class="tab-inactive pb-4 border-b-2 text-sm transition-all"
                        id="tabSimilares">Similares</button>
                </nav>
            </div>

            <!-- TAB: Resumen -->
            <div id="panelResumen" class="tab-panel">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Presupuesto -->
                        <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                            <h2 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3">Presupuesto
                                Referencial</h2>
                            <div id="tenderBudget" class="text-4xl font-black text-slate-900 tracking-tighter">S/ 0
                            </div>
                        </div>
                        <!-- Descripción -->
                        <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Objeto del
                                Proceso</h3>
                            <p id="tenderDescription" class="text-slate-700 leading-relaxed text-base">Cargando...</p>
                        </div>
                        <!-- Requisitos -->
                        <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-5">Requisitos
                                Técnicos</h3>
                            <div id="tenderRequirements" class="space-y-3"></div>
                        </div>
                    </div>
                    <!-- Sidebar de IA -->
                    <div class="space-y-6">
                        <div class="bg-primary rounded-2xl p-7 text-white shadow-xl shadow-primary/20">
                            <div
                                class="flex items-center gap-2 text-[10px] font-black uppercase tracking-widest mb-5 opacity-70">
                                <span class="material-symbols-outlined text-sm">psychology</span> IA Insights
                            </div>
                            <p class="text-sm font-semibold leading-relaxed mb-3">
                                Proceso con <span class="bg-white/20 px-2 py-0.5 rounded font-black">ALTA
                                    AFINIDAD</span> para INPROMETAL.
                            </p>
                            <p class="text-xs opacity-70 leading-relaxed">Calza con su especialidad en Fabricaciones
                                Metálicas y Estructuras Pesadas.</p>
                        </div>
                        <div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-sm">
                            <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Match
                                INPROMETAL</h4>
                            <div id="matchCircle" class="flex items-center gap-4">
                                <div class="relative w-16 h-16">
                                    <svg class="w-16 h-16 -rotate-90" viewBox="0 0 36 36">
                                        <circle cx="18" cy="18" r="15.9" fill="none" stroke="#e2e8f0" stroke-width="3">
                                        </circle>
                                        <circle id="matchArc" cx="18" cy="18" r="15.9" fill="none" stroke="#135bec"
                                            stroke-width="3" stroke-dasharray="0, 100" stroke-linecap="round"></circle>
                                    </svg>
                                    <span id="matchPercent"
                                        class="absolute inset-0 flex items-center justify-center text-sm font-black text-slate-900">0%</span>
                                </div>
                                <div>
                                    <p class="text-xs font-bold text-slate-700">Relevancia</p>
                                    <p class="text-[10px] text-slate-400">Basado en palabras clave</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: Cronograma (Timeline Visual) -->
            <div id="panelCronograma" class="tab-panel hidden">
                <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="text-sm font-black text-slate-900 mb-8">Ciclo de Vida del Proceso</h3>
                    <div id="timelineContainer" class="space-y-0">
                        <!-- Inyectado por JS -->
                    </div>
                </div>
            </div>

            <!-- TAB: Documentos -->
            <div id="panelDocumentos" class="tab-panel hidden">
                <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="text-sm font-black text-slate-900 mb-6">Documentos del Proceso</h3>
                    <div class="space-y-4">
                        <div
                            class="flex items-center justify-between p-5 bg-slate-50 rounded-xl border border-slate-100 hover:border-primary/30 transition-all group cursor-pointer">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-red-500 text-2xl">picture_as_pdf</span>
                                <div>
                                    <p class="text-sm font-bold text-slate-800">Bases Administrativas</p>
                                    <p class="text-[10px] text-slate-400">PDF • Publicado con la convocatoria</p>
                                </div>
                            </div>
                            <span
                                class="material-symbols-outlined text-slate-300 group-hover:text-primary transition-all">download</span>
                        </div>
                        <div
                            class="flex items-center justify-between p-5 bg-slate-50 rounded-xl border border-slate-100 hover:border-primary/30 transition-all group cursor-pointer">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-blue-500 text-2xl">folder_zip</span>
                                <div>
                                    <p class="text-sm font-bold text-slate-800">Expediente Técnico</p>
                                    <p class="text-[10px] text-slate-400">ZIP • Incluye planos y especificaciones</p>
                                </div>
                            </div>
                            <span
                                class="material-symbols-outlined text-slate-300 group-hover:text-primary transition-all">download</span>
                        </div>
                        <div
                            class="flex items-center justify-between p-5 bg-slate-50 rounded-xl border border-slate-100 hover:border-primary/30 transition-all group cursor-pointer">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-green-500 text-2xl">description</span>
                                <div>
                                    <p class="text-sm font-bold text-slate-800">Consultas y Observaciones</p>
                                    <p class="text-[10px] text-slate-400">PDF • Resueltas por el comité</p>
                                </div>
                            </div>
                            <span
                                class="material-symbols-outlined text-slate-300 group-hover:text-primary transition-all">download</span>
                        </div>
                    </div>
                    <p class="mt-6 text-xs text-slate-400 text-center italic">Los archivos serán enlazados directamente
                        desde el portal SEACE en la versión de producción.</p>
                </div>
            </div>

            <!-- TAB: Similares -->
            <div id="panelSimilares" class="tab-panel hidden">
                <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="text-sm font-black text-slate-900 mb-6">Licitaciones Similares</h3>
                    <div id="similarContainer" class="space-y-3">
                        <!-- Inyectado por JS -->
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script src="detalle.js"></script>
</body>

</html>